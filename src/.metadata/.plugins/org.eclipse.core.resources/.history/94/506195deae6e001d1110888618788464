#include "device_registers.h"

void GPIO_PORT_INIT()
{
    // GPIO PCC 설정 - CGC 마스킹
    PCC->PCCn[PCC_PORTA_INDEX] |= PCC_PCCn_CGC_MASK;

    /* GPIOA PDDR 설정
    // INPUT: PA5 PA6 PA7 PA8
    // OUTPUT: PA9 PA10 PA11
    */
    PTA->PDDR &= ~((1<<5)|(1<<6)|(1<<7)|(1<<8));
    PTA->PDDR |= (1<<9)|(1<<10)|(1<<11);

    // PORTA: PA5 PA6 PA7 PA8 PA9 PA10 PA11 MUX 설정
    PORTA->PCR[5] |= PORT_PCR_MUX(1);
    PORTA->PCR[6] |= PORT_PCR_MUX(1);
    PORTA->PCR[7] |= PORT_PCR_MUX(1);
    PORTA->PCR[8] |= PORT_PCR_MUX(1);
    PORTA->PCR[9] |= PORT_PCR_MUX(1);
    PORTA->PCR[10] |= PORT_PCR_MUX(1);
    PORTA->PCR[11] |= PORT_PCR_MUX(1);


}

void TEST()
{
	if(!(PTA->PDIR & (1<<5)))
	    PTA->PCOR |= (1<<9);
	else
	    PTA->PSOR |= (1<<9);

	if(!(PTA->PDIR & (1<<6)))
		PTA->PCOR |= (1<<10);
	else
	    PTA->PSOR |= (1<<10);

    if(!(PTA->PDIR & (1<<7)))
        PTA->PCOR |= (1<<11);
    else
        PTA->PSOR |= (1<<11);
}

// test
int main(void){
     GPIO_PORT_INIT();

    while(1)
    {
        TEST();
    }
}
